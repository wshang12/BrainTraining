# 测试指南

## 🚀 快速开始

```bash
# 1. 安装依赖（如果还没有）
npm install

# 2. 启动开发服务器
npm run dev

# 3. 在浏览器中访问
http://localhost:3000
```

## ✅ 功能测试清单

### 1. 基础功能
- [ ] 首页正常加载
- [ ] 底部导航栏正常显示和切换
- [ ] 深色模式切换正常工作

### 2. 游戏功能
- [ ] 访问 `/games/tracklight`
- [ ] **首次访问应显示新手教程**
- [ ] 点击"开始游戏"能正常开始
- [ ] 游戏运行流畅（检查控制台的 FPS）
- [ ] 游戏结束后显示结果页面

### 3. 付费转化功能
- [ ] 完成游戏后查看结果页面
- [ ] **高分时（3星）应显示"解锁更多挑战"提示**
- [ ] 连续玩3次后应显示"无限训练次数"提示
- [ ] 点击付费提示能跳转到订阅页面

### 4. 订阅页面
- [ ] 访问 `/subscribe`
- [ ] 显示三个价格套餐
- [ ] 默认选中"季度会员"
- [ ] 点击套餐能切换选择
- [ ] 显示用户评价和FAQ

### 5. 数据分析
- [ ] 先在个人中心登录（使用模拟登录）
- [ ] 访问 `/analysis`
- [ ] 显示能力雷达图
- [ ] 显示进步曲线
- [ ] 可以切换时间范围（7天/30天/90天）

### 6. 状态管理
- [ ] 打开浏览器开发者工具
- [ ] 在 Application → Local Storage 中查看
- [ ] 应该能看到 `user-store` 数据
- [ ] 修改偏好设置后，刷新页面设置应该保持

## 🔍 调试技巧

### 查看控制台日志
```javascript
// 在浏览器控制台运行
localStorage.getItem('user-store')
localStorage.getItem('brain-training:game-sessions')
```

### 模拟付费用户
```javascript
// 在控制台运行，模拟 Pro 用户
localStorage.setItem('subscription', 'pro')
```

### 清除所有数据
```javascript
// 重置为初始状态
localStorage.clear()
location.reload()
```

## 🐛 常见问题

### 1. 游戏不显示
- 检查 Canvas 是否支持
- 查看控制台是否有错误

### 2. 数据分析页面空白
- 需要先登录
- 需要先玩几局游戏产生数据

### 3. 付费提示不显示
- 检查是否已经设置为 Pro 用户
- 清除 localStorage 重试

## 📊 性能验证

### 游戏性能
1. 打开开发者工具 → Performance
2. 开始录制
3. 玩一局游戏
4. 停止录制
5. 检查 FPS 是否稳定在 60

### 内存使用
1. 打开开发者工具 → Memory
2. 拍摄堆快照
3. 玩几局游戏
4. 再次拍摄堆快照
5. 比较内存增长是否合理

## 🎯 核心功能验证点

1. **游戏引擎**
   - 统一的生命周期管理 ✓
   - 性能监控数据收集 ✓
   - 标准化的结果输出 ✓

2. **数据层**
   - Repository 模式正常工作 ✓
   - 数据持久化到 localStorage ✓
   - 查询和统计功能正常 ✓

3. **状态管理**
   - Zustand Store 正常工作 ✓
   - 状态自动持久化 ✓
   - 跨组件状态同步 ✓

4. **付费系统**
   - 智能付费提示显示 ✓
   - 订阅页面完整展示 ✓
   - 转化追踪参数传递 ✓

## 📱 移动端测试

使用 Chrome 开发者工具的设备模拟：
1. F12 打开开发者工具
2. 点击设备图标切换到移动视图
3. 测试触摸操作是否正常
4. 检查响应式布局

## ✨ 测试成功标志

如果以下所有项都正常，说明改动成功：
- ✅ 构建无错误
- ✅ 所有页面能正常访问
- ✅ 游戏能正常运行
- ✅ 数据能正确保存和读取
- ✅ 付费提示在正确时机出现
- ✅ 新手教程正常显示

恭喜！你的脑力训练 APP 已经具备了核心功能！